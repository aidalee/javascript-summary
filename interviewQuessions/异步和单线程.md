# 题目

## 同步和异步的区别是什么？分别举一个同步和异步的例子

同步会阻塞代码执行，而异步不会  
[Javascript 异步编程的 4 种方法](http://www.ruanyifeng.com/blog/2012/12/asynchronous%EF%BC%BFjavascript.html)
[js 中的同步和异步的个人理解](js中的同步和异步的个人理解)

```
console.log(100)
setTimeout(function(){
    console.log(200)
},1000)
console.loh(300)
// 100 300 200
```

## 一个关于 setTimeout 的笔试题

## 前端使用异步的场景有哪些

- 定时任务：setTimeout、setInterval
- 网络请求：ajax 请求、动态<img>加载
- 事件绑定

## 什么是单线程，和异步有什么关系

> 答案：单线程就是同时只做一件事，两段 JS 不能同时执行。原因就是为了避免 DOM 渲染的冲突（因为 js 能改变 dom 结构）。异步是一种“无奈”的解决方案，虽然有很多问题。

- 单线程-只有一个线程，只能做一件事

  ```
  // 循环运行期间，JS执行和DOM渲染暂时卡顿
  console.log(start)
  var i,sum=0;
  for(i=0;i<1000000;i++){
      sum+=i;
  }
  console.log(sum)
  ```

  ```
  // alert不处理，JS执行和DOM渲染暂时卡顿
  console.log(1)
  alert('hello')
  console.log(2)
  ```

- 原因-避免 DOM 渲染的冲突

1. 浏览器需要渲染 DOM
2. JS 可以修改 DOM 结构
3. JS 执行的时候，浏览器 DOM 渲染会暂停（如果不暂停，一边渲染一边修改引起冲突）
4. 两段 JS 也不能同时执行（都修改了 DOM 就冲突了）
5. h5 中新增的 webworker 支持多线程，【但是不能访问 DOM】

- 解决方案-异步（但是异步也会带来新的问题，所以有了异步的解决方案 Promise、async、await ）

  > 异步是 js 单线程的一个唯一解决方案

  ```
  console.log(100)
  setTimeout(function(){
      console.log(200)
  },1000)
  console.log(300)
  conosle.log(400)
  ```

  ```
  console.log(100)
  $.ajax...
  console.log(300)
  ```

  > 异步在解决 js 单线程问题的同时也带来了一些问题

  - 问题一：没有按照书写顺序执行，可读性差
  - 问题二：callback 函数 中不容易模块化

- 实现方式-event loop

## 什么是 event-loop

- 文字解释
  1. 即事件循环/事件轮询,js 实现异步的具体解决方案
  2. 同步代码直接执行
  3. 异步函数先放在异步队列中
  4. 待同步函数执行完毕，轮询执行 异步队列 的函数
- 实例分析

  ```
  setTimeout(function(){
      console.log(100)
  })
  console.log(200)
  // 分析以上代码：
  // 主线程
  console.log(200)
  // 异步队列
  function() {
      console.log(100)
  }
  ```

  ```
  setTimeout(function(){
      console.log(1)
  },100)
  setTimeout(function(){
      console.log(2)
  })
  console.log(3)
  // 分析以上代码：
  // 主线程
  console.log(3)
  // 异步队列
  // 立刻被放入
  function(){
      console.log(2)
  }
  // 100ms 之后被放入
  function(){
      console.log(1)
  }
  // 当主进程的3和第二个异步的2都执行完之后，100ms还没到，js引擎会一直轮询（监视着）异步队列，当100ms后1被放入，js引擎会立即将1放入主进程执行。（一直监视，当有异步事件就放入主进程执行）
  ```

- 实战代码
  ```
    $.ajax({
        url:'./data.json',
        success:function(){
            console.log('a')
        } // ajax请求成功后再放入异步队列
    })
    setTimeout(function(){
        console.log('b)
    },1000) // 1000ms之后放入到异步队列
    setTimeout(function(){
        console.log('c')
    }) // 立即放入异步队列
    console.log('d') // 立即执行
  ```
- 常问问题
  1. 什么是异步队列，何时被放入异步队列
  2. 说说轮询的过程

## 是否用过 jQuery 的 Deferred

> 代码实现见 jquery-deferred.js

### jQuery1.5 的变化带来结果:

1. 无法改变 js 异步和单线程的本质
2. 只能从写法上杜绝 callback 这种形式
3. 它是一种语法糖形式，但是解耦了代码
4. 很好的体现：开放封闭原则（对扩展开放，对修改封闭）

## Promise 的基本使用和原理

## 介绍一下 async/await（和 Promise 的区别、联系）

async/await 是对 Promise 的补充

## 总结一下当前 JS 解决异步的方案

# 知识点

## 什么是异步（对比同步）

## 什么是单线程

> 单线程的特点，不能同时干两件事

## 何时需要异步

- 在可能发生等待的情况
- 等待过程中不能像 alert 一样阻塞程序运行
- 因此，所有的“等待的情况都需要异步”

## 前端使用异步的场景

- 定时任务：setTimeout、setInterval
- 网络请求：ajax 请求、动态<img>加载
- 事件绑定

## 异步和单线程
